<!doctype html>
<html lang="zh"> 
 <head> 
  <meta charset="utf-8"> 
  <meta name="keywords" content="A Big Piture On Concurrency - 架构教练,架构师个人成长教练,个人成长,组织成长,个人与组织成长顾问, architecture, book author, thinker, fighter, 架构, 思考, 技术, 武术, 哲学"> 
  <meta name="description" content="A Big Piture On Concurrency - 扶墙老师说，王福强的个人博客， 一个架构士的思考与沉淀"> 
  <meta name="author" content="王福强"> 
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> 
  <title>A Big Piture On Concurrency -王福强的个人博客：一个架构士的思考与沉淀</title> 
  <link rel="shortcut icon" href="/favicon.ico"> 
  <style type="text/css">code{white-space: pre;}</style> 
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css"> 
  <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script> 
  <script type="text/javascript" src="/js/watermark.js"></script> <!-- Bootstrap core CSS --> 
  <link href="/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet"> <!-- Custom fonts for this template --> 
  <link href="/vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css"> <!-- Custom styles for this template --> 
  <link href="/css/freelancer.css" rel="stylesheet"> 
  <style type="text/css">
    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      text-align: left;
      position: relative;
      -webkit-font-smoothing: antialiased;
    }
    

    h1{
      margin-top: 3rem;
    }
  </style> 
 </head> 
 <body id="page-top"> <!-- Navigation --> 
  <nav class="navbar navbar-expand-lg bg-secondary fixed-top text-uppercase" id="mainNav"> 
   <div class="container"> <a class="navbar-brand js-scroll-trigger" href="/"> <img src="/images/profile.jpeg" alt="" style="display: inline; border-radius: 50%; height: 50px;">王福强的个人博客 </a> <button class="navbar-toggler navbar-toggler-right text-uppercase bg-primary text-white rounded" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"> Menu <i class="fas fa-bars"></i> </button> 
    <div class="collapse navbar-collapse" id="navbarResponsive"> 
     <ul class="navbar-nav ml-auto"> 
      <li class="nav-item mx-0 mx-lg-1"> <a class="nav-link py-3 px-0 px-lg-3" href="/posts.html">博客文章</a> </li> 
      <li class="nav-item mx-0 mx-lg-1"> <a class="nav-link py-3 px-0 px-lg-3" href="/books.html">创作出版</a> </li> 
      <li class="nav-item mx-0 mx-lg-1"> <a class="nav-link py-3 px-0 px-lg-3" href="https://edu.afoo.me">福强AI学堂</a> </li> 
      <li class="nav-item mx-0 mx-lg-1"> <a class="nav-link py-3 px-0 px-lg-3" href="/crosslinks.html">更多链接</a> </li> 
      <li class="nav-item mx-0 mx-lg-1"> <a class="nav-link py-3 px-0 px-lg-3" href="/whoami.html">关于我</a> </li> 
      <li class="nav-item mx-0 mx-lg-1"> <a class="nav-link py-3 px-0 px-lg-3" href="/feeds.xml">RSS订阅</a> </li> 
     </ul> 
    </div> 
   </div> 
  </nav> 
  <section> 
   <div class="container"> <!--        <div class="row">--> <!--          <div class="col-lg-8 mx-auto">--> 
    <p class="lead"> </p>
    <h1 class="title">A Big Piture On Concurrency</h1> 
    <p></p> 
    <hr> 
    <pre>3- Concurrency Share (Concurrency Made Easy)
    3.1 why concurrency?
        1 - 为了反应一些问题的逻辑结构（reflect the logical structures of some problems) 
        2 - 为了应对相互独立的多台物理设备（to manange multiple independent devices）
        3 - 通过同时在多部处理器上运行以题高性能（improve computing performance）
    
    3.1 the benefits to use concurrency
        3.1.1 reduce latency
            (divide and conquer, splitting one task into multiple smaller ones that's to be executed in concurrency makes it complete faster and therefore will reduce latency)
        3.1.2 hide latency (in task is blocking on some long-run operations, the concurrency can hide the long-run operations by swithc to do other tasks at the mean time)
            concurrency is not the only option to do this, other options including:
            3.1.2.1 nonblocking operations(eg. asynchronous IO)  
            3.1.2.2 an event-loop(poll()/select() on Unix)   
        3.1.3 increase throughtput (more tasks can be processed without wasting computing power)
    
    3.2 concurrency models
        3.2.1 Share-State Concurrency
            1- equipments or ways to control concurrency
                1 immutable
                2 confinement
                    thread-confinement
                        thread-specific storage (ThreadLocal in Java)
                    stack confinement
                        method confinement
                3 lock-based concurrency (locks and condition variables)
                    common gotchas
                        deadlocks (solution: resource re-ordering, interval retry)
                        livelocks 
                    tuning locks:
                        reduce time of holding locks
                        break glabal locks to fine-grained ones
                4 atomic variables(CAS)
                    Java5 java.util.concurrency.atomic.*
                5 STM (Software Transaction Memory)
                    concept
                        tx operations execute in their own thread in parallel, commit will cause one to be successful and others abort and retry.
                        
                    languages or platform that support STM:
                        Clojure
                        Concurrent Haskell
                        STM.NET 
            2- conclusion on this type concurrency
                1 perssimistic strategy (e.g. Lock, pin-loop, blocking) 
                    1 situation suitable 
                        - high contention situations
                2 optimistic strategy    (e.g. CAS(Compare And Swap/Set), STM)
                    1 situation suitable 
                        - low or middle contention situations
        3.2.2 Share-Nothing Concurrency / Message-Passing Concurrency( parallel processing)
            Actor Model Concurrency
                    (1) change its internal state,  
                    (2) send messages to peer actors,  
                    (3) create new actors, and/or  
                    (4) migrate to another computing host.
            
            representative languages
                Erlang
                Scala
            
            disadvantages
                not suitable when we really want to share something between co-workers(threads or processes)
                
                

        3.2.3    Dataflow/Declaritive Concurrency (can be under share-state concurrency too)
            1- single-assignment variable
            2- data-state trigger the process flow
 
</pre> 
    <p>注： 只是一些点的记录和总结，最终成文时可能还会调整， 请持怀疑的态度阅读和采纳。</p> <!--          </div>--> <!--        </div>--> 
    <hr> 
    <div> 
     <p> 「为AI疯狂」星球上，扶墙老师正在和朋友们讨论有趣的AI话题，你要不要⼀起来呀？^-^<br> 这里 </p>
     <ol> 
      <li>不但有及时新鲜的AI资讯和深度探讨</li> 
      <li>还分享AI工具、产品方法和商业机会</li> 
      <li>更有原价1000多的付费内容(近500分钟)等着你，<a href="https://t.zsxq.com/0dI3ZA0sL">加入星球(https://t.zsxq.com/0dI3ZA0sL)</a> 即可免费领取! </li> 
     </ol> 
     <p></p> <a href="https://t.zsxq.com/0dI3ZA0sL"> <img src="/posts/images/2023-05-06-12-09-53.jpg" alt="知识星球二维码"> </a> 
    </div> 
    <hr> 
    <div> <a href="/posts.html"> <b> &gt;&gt;&gt;&gt;&gt;&gt; 更多阅读 &lt;&lt;&lt;&lt;&lt;&lt; </b></a> 
    </div> 
    <div id="random_posts"> 
     <div class="alert alert-light" role="alert"> <a href="/posts/2018-10-26-thinking_upgrade.html">王福强：让升级思维指引行业方向的选择 </a> 
     </div> 
     <div class="alert alert-light" role="alert"> <a href="/posts/2013-06-29-understanding-tcp-friends-mechanism.html">了解TCP Friends机制 </a> 
     </div> 
     <div class="alert alert-light" role="alert"> <a href="/posts/2010-06-19-go-hospital.html">终于中招了 </a> 
     </div> 
    </div> 
    <hr> <a href="https://wfq.gumroad.com/l/fb"> <img src="/images/fb_subscribe.jpg" alt="订阅「福报Premium订阅」"> </a> 
    <div id="comments"></div> 
    <hr> 
    <div class="text-center"> <a href="https://twitter.com/fujohnwang"> <img src="/images/Twitter-logo.png" class="img-responsive" loading="lazy" style="width: fit-content;"> </a> 
    </div> 
   </div> 
  </section> 
  <div style="color:white; visibility: collapse; height: 0;">
   ©<a href="/whoami.html">王福强</a>个人版权所有, All Rights Reserved.
  </div> 
  <div class="copyright py-4 text-center text-white"> 
   <div class="container"> <small>Copyright © <a href="/whoami.html">王福强</a>个人版权所有 - Since 2004</small> 
    <br><small>Everything is homebrewed with <a href="https://pandoc.org/">pandoc</a> and <a href="https://daringfireball.net/projects/markdown/syntax">Markdown</a>, little <a href="https://www.scala-lang.org/">Scala</a> also included.</small> 
   </div> 
  </div> 
  <script type="text/javascript">
var gitalk = new Gitalk({
  clientID: '518a605d711883414ac0',
  clientSecret: '69fb8ccc0616c5bcbc64d24ece0d06d279da91ff',
  repo: 'afoo.me.comments',
  owner: 'fujohnwang',
  admin: ['fujohnwang'],
  id: location.pathname.substring(0, 49),      // Ensure uniqueness and length less than 50
  distractionFreeMode: false  // Facebook-like distraction free mode
})

gitalk.render('comments')
    </script> 
  <script src="https://storage.ko-fi.com/cdn/scripts/overlay-widget.js"></script> 
  <script>
  kofiWidgetOverlay.draw('fff000', {
    'type': 'floating-chat',
    'floating-chat.donateButton.text': 'Support me',
    'floating-chat.donateButton.background-color': 'red',
    'floating-chat.donateButton.text-color': 'white'
  });
</script> 
  <script>
  fetch('https://jsonld.afoo.me', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      url: window.location.href
    })
  }).then(response => response.text()).then(structuredDataText => {
    const script = document.createElement('script');
    script.setAttribute('type', 'application/ld+json');
    script.textContent = structuredDataText;
    document.head.appendChild(script);
  });
</script>  
  <script>watermark.init({ watermark_txt: "©王福强个人版权所有, All Rights Reserved." , watermark_width:200})</script> 
 </body>
</html>