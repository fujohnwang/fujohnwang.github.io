<!doctype html>
<html lang="zh"> 
 <head> 
  <meta charset="utf-8"> 
  <meta name="keywords" content="Transaction Management Patterns In Brief - architecture, book author, thinker, fighter, 架构, 思考, 技术, 武术, 哲学"> 
  <meta name="description" content="Transaction Management Patterns In Brief - 扶墙老师说，王福强的个人博客， 一个架构士的思考与沉淀"> 
  <meta name="author" content="王福强"> 
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> 
  <title>Transaction Management Patterns In Brief - 扶墙老师说：一个架构士的思考与沉淀</title> 
  <link rel="shortcut icon" href="/favicon.ico"> 
  <style type="text/css">code{white-space: pre;}</style> 
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css"> 
  <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script> 
  <script type="text/javascript" src="/js/watermark.js"></script> <!-- Bootstrap core CSS --> 
  <link href="/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet"> <!-- Custom fonts for this template --> 
  <link href="/vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css"> <!-- Custom styles for this template --> 
  <link href="/css/freelancer.css" rel="stylesheet"> <!--    <link href="/ivy.css" rel="stylesheet">--> <!-- 百度统计 --> 
  <script>
      var _hmt = _hmt || [];
      (function() {
          var hm = document.createElement("script");
          hm.src = "//hm.baidu.com/hm.js?4b0cf57d9b677da796218f27d72dbbca";
          var s = document.getElementsByTagName("script")[0];
          s.parentNode.insertBefore(hm, s);
      })();
    </script> 
 </head> 
 <body id="page-top"> <!-- Navigation --> 
  <nav class="navbar navbar-expand-lg bg-secondary fixed-top text-uppercase" id="mainNav"> 
   <div class="container"> <a class="navbar-brand js-scroll-trigger" href="/"> <img src="/images/profile.jpeg" alt="" style="display: inline; border-radius: 50%; height: 50px;">福强说 <small>一个<b>架构士</b>的思考与沉淀</small> </a> <button class="navbar-toggler navbar-toggler-right text-uppercase bg-primary text-white rounded" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"> Menu <i class="fas fa-bars"></i> </button> 
    <div class="collapse navbar-collapse" id="navbarResponsive"> 
     <ul class="navbar-nav ml-auto"> 
      <li class="nav-item mx-0 mx-lg-1"> <a class="nav-link py-3 px-0 px-lg-3" href="/whoami.html">个人简介</a> </li> 
      <li class="nav-item mx-0 mx-lg-1"> <a class="nav-link py-3 px-0 px-lg-3" href="/posts.html">个人博客</a> </li> 
      <li class="nav-item mx-0 mx-lg-1"> <a class="nav-link py-3 px-0 px-lg-3" href="/books.html">我的著作</a> </li> 
      <li class="nav-item mx-0 mx-lg-1"> <a class="nav-link py-3 px-0 px-lg-3" href="/crosslinks.html">更多链接</a> </li> 
      <li class="nav-item mx-0 mx-lg-1"> <a class="nav-link py-3 px-0 px-lg-3" href="/feeds.xml">RSS订阅</a> </li> 
     </ul> 
    </div> 
   </div> 
  </nav> 
  <section> 
   <div class="container"> <!--        <div class="row">--> <!--          <div class="col-lg-8 mx-auto">--> 
    <p class="lead"> </p>
    <h1 class="title">Transaction Management Patterns In Brief</h1> 
    <p></p> 
    <hr> 
    <ul> 
     <li><a href="#wing-and-a-prayer-pattern"><span class="toc-section-number">1</span> Wing-And-A-Prayer Pattern</a></li> 
     <li><a href="#shared-transaction-resources-pattern"><span class="toc-section-number">2</span> Shared Transaction Resources Pattern</a></li> 
     <li><a href="#non-transactional-access-pattern"><span class="toc-section-number">3</span> Non-Transactional Access Pattern</a></li> 
     <li><a href="#best-efforts-1pc-pattern"><span class="toc-section-number">4</span> Best Efforts 1PC Pattern</a></li> 
     <li><a href="#xa-2pc-distributed-transaction-pattern"><span class="toc-section-number">5</span> XA 2PC Distributed Transaction Pattern</a></li> 
    </ul> 
    <hr> 
    <p>There are several patterns you can take when you have faced with balances on transaction management, especially when you are using spring framework to do such things. The idea is not mine, I just give a brief note here, although I have used some patterns myself, but I didn’t name them.</p> 
    <p>I start from the simplest pattern.</p> 
    <h1 data-number="1" id="wing-and-a-prayer-pattern"><span class="header-section-number">1</span> Wing-And-A-Prayer Pattern</h1> 
    <p>this is a type of anti-pattern or worse practice, it means, you manage transaction on A resource, but data access on B resource, in chinese “驴唇不对马嘴”, :-)</p> 
    <h1 data-number="2" id="shared-transaction-resources-pattern"><span class="header-section-number">2</span> Shared Transaction Resources Pattern</h1> 
    <p>the data access request are sent to resource A, the transaction are managed against resource A too, that’s, the normal situation, right?</p> 
    <h1 data-number="3" id="non-transactional-access-pattern"><span class="header-section-number">3</span> Non-Transactional Access Pattern</h1> 
    <p>we have 2 or more resources, in this pattern, we only guarantee ONE long transaction against one of the resources, as to data access requests against other resources, we let them go ( auto commit, as u see).</p> 
    <h1 data-number="4" id="best-efforts-1pc-pattern"><span class="header-section-number">4</span> Best Efforts 1PC Pattern</h1> 
    <p>we have 2 or more resources too, just like the scenario in Non-Transactional Access Pattern, but only guarantee ONE long transaction is not enough, and we don’t want to use XA distributed transaction management either, so what we do?</p> 
    <p>In Best Efforts 1PC Pattern, we start all of the local transaction against each resources we manage, we commit or rollback them all as per situation, but don’t guarantee the data integration when errors occurs at the point of commit or rollback, there is only 1 phase commit and we do our best to make sure the transactions to be managed properly, that’s why it’s called Best Efforts 1 PC Pattern.</p> 
    <h1 data-number="5" id="xa-2pc-distributed-transaction-pattern"><span class="header-section-number">5</span> XA 2PC Distributed Transaction Pattern</h1> 
    <p>it’s natural to resort to XA 2PC Distributed Transaction Pattern when the transaction involves more resources, we all know it, but we also know that XA 2PC distributed transaction brings performance penalty too.</p> 
    <p>So, you see, no matter which pattern you choose, choose one that’s suitable to your scenario!</p> 
    <p>BTW, Taobao guys have another solution for transaction management, but their solution is specific to their scenario too, so pick the one that ’s best suitable to you.</p> <!--          </div>--> <!--        </div>--> 
    <hr> 
    <div> <a href="/posts.html"> <b> &gt;&gt;&gt;&gt;&gt;&gt; 更多阅读 &lt;&lt;&lt;&lt;&lt;&lt; </b></a> 
    </div> 
    <div id="random_posts"> 
     <div class="alert alert-light" role="alert"> <a href="/posts/2015-03-17-api-design-and-documentation.html">API Design And Documentation </a> 
     </div> 
     <div class="alert alert-light" role="alert"> <a href="/posts/2015-09-21-huadong-internet-tech-summit.html">华东互联网+技术峰会回顾 </a> 
     </div> 
     <div class="alert alert-light" role="alert"> <a href="/posts/2008-07-25-thougths-after-zhou-words.html">由周周的话所想到的… </a> 
     </div> 
    </div> 
    <hr> 
    <img src="/images/zanshang.jpg" width="300/"> 
    <div id="comments"></div> 
    <hr> 
    <div class="text-center"> 
     <img src="/images/mp_footer.jpeg" class="img-responsive" loading="lazy" style="width: fit-content;"> 
    </div> 
   </div> 
  </section> 
  <div style="color:white; visibility: collapse; height: 0;">
   ©王福强个人版权所有, All Rights Reserved.
  </div> 
  <div class="copyright py-4 text-center text-white"> 
   <div class="container"> <small>Copyright © 王福强个人版权所有 - Since 2004</small> 
   </div> 
  </div> 
  <script type="text/javascript">
var gitalk = new Gitalk({
  clientID: '518a605d711883414ac0',
  clientSecret: '69fb8ccc0616c5bcbc64d24ece0d06d279da91ff',
  repo: 'afoo.me.comments',
  owner: 'fujohnwang',
  admin: ['fujohnwang'],
  id: location.pathname.substring(0, 49),      // Ensure uniqueness and length less than 50
  distractionFreeMode: false  // Facebook-like distraction free mode
})

gitalk.render('comments')
    </script>  
  <script>watermark.init({ watermark_txt: "©王福强个人版权所有, All Rights Reserved." , watermark_width:200})</script> 
 </body>
</html>