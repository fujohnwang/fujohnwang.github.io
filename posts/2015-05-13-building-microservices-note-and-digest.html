<!doctype html>
<html lang="zh" class="motion-safe:scroll-smooth 2xl:text-[20px]"> 
 <head> 
  <meta charset="utf-8"> 
  <meta name="keywords" content="BuildingMicroservicesè¯»ä¹¦ç¬”è®°ä¸æ„Ÿæ‚Ÿ - æ¶æ„å¸ˆï¼Œ æ¶æ„å£«ï¼Œæ¶æ„æ•™ç»ƒ, æ•™ç»ƒ, ä¸ªäººæˆé•¿, ç»„ç»‡æˆé•¿, ç‹¬ç«‹é¡¾é—®, architecture, book author, thinker, fighter, æ¶æ„, æ€è€ƒ, æŠ€æœ¯, æ­¦æœ¯, å“²å­¦"> 
  <meta name="description" content="BuildingMicroservicesè¯»ä¹¦ç¬”è®°ä¸æ„Ÿæ‚Ÿ - ç¦å¼ºè¯´ï¼Œæ‰¶å¢™è€å¸ˆè¯´ï¼Œç‹ç¦å¼ºçš„ä¸ªäººåšå®¢ï¼Œ ä¸€ä¸ªæ¶æ„å£«çš„æ€è€ƒä¸æ²‰æ·€"> 
  <meta name="author" content="ç‹ç¦å¼º"> 
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> 
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
  <meta name="robots" content="index,follow"> 
  <title>BuildingMicroservicesè¯»ä¹¦ç¬”è®°ä¸æ„Ÿæ‚Ÿ -ç‹ç¦å¼ºçš„ä¸ªäººåšå®¢ï¼šä¸€ä¸ªæ¶æ„å£«çš„æ€è€ƒä¸æ²‰æ·€</title> 
  <meta name="date" content="2015-05-13"> 
  <link rel="shortcut icon" href="/favicon.ico"> 
  <link rel="canonical" href="https://afoo.me/posts/2015-05-13-building-microservices-note-and-digest.html"> 
  <link rel="icon" type="image/svg+xml" href="https://afoo.me/favicon.svg"> 
  <link rel="mask-icon" href="https://afoo.me/favicon.svg" color="#3383F8"> 
  <script src="https://unpkg.com/htmx.org@1.9.5"></script> 
  <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css"> 
  <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script> 
  <script src="https://unpkg.com/@popperjs/core@2"></script> 
  <script src="https://unpkg.com/tippy.js@6"></script> 
  <link rel="stylesheet" href="/css/af.css"> 
  <link rel="stylesheet" href="/css/components.css"> 
  <link ref="stylesheet" href="/css/pygments.css"> 
  <style type="text/css">
        pre > code{
          white-space: pre-wrap;
          font-family: monospace;
          font-size: 14px;
          /* border-left: blueviolet;
          border-left-width: thick;
          border-left-style: double;
          padding-left: 1rem !important; */
        }
        
        .x-indicator{
            display:none;
        }
        .htmx-request .x-indicator{
            display:inline;
        }
        .htmx-request.x-indicator{
            display:inline;
        }
    </style> 
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "NewsArticle",
      "headline": "BuildingMicroservicesè¯»ä¹¦ç¬”è®°ä¸æ„Ÿæ‚Ÿ",
      "image": [
        "https://afoo.me/images/fb_subscribe.jpg"
       ],
      "datePublished": "2015-05-13",
      "author": [{
          "@type": "Person",
          "name": "ç‹ç¦å¼º",
          "url": "https://afoo.me"
        }]
    }
  </script> 
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3687639021943715" crossorigin="anonymous"></script> 
 </head> 
 <body class="antialiased text-gray-900 dark:text-slate-300 tracking-tight bg-white dark:bg-slate-900 vsc-initialized"> 
  <header class="sticky top-0 z-40 flex-none mx-auto w-full bg-white md:bg-white/90 dark:bg-slate-900 dark:md:bg-slate-900/90 md:backdrop-blur-sm border-b dark:border-b-0" id="header"> 
   <div class="py-3 px-3 mx-auto w-full md:flex md:justify-between max-w-6xl md:px-4"> 
    <div class="flex justify-between"> <a class="flex items-center" href="https://afoo.me"> <span class="self-center ml-2 text-2xl font-extrabold text-gray-900 whitespace-nowrap dark:text-white"> <h1>ç‹ç¦å¼ºçš„åšå®¢</h1> </span> </a> 
     <div class="flex items-center md:hidden"> <button type="button" class="text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 rounded-lg text-sm p-2.5 inline-flex items-center" aria-label="Toggle between Dark and Light mode" data-toggle-color-scheme=""> 
       <svg viewbox="0 0 24 24" class="w-6 h-6" astro-icon="tabler:sun"> <g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"> 
         <circle cx="12" cy="12" r="4"></circle> 
         <path d="M3 12h1m8-9v1m8 8h1m-9 8v1M5.6 5.6l.7.7m12.1-.7-.7.7m0 11.4.7.7m-12.1-.7-.7.7"> 
         </path> 
        </g> 
       </svg> </button> <button type="button" class="ml-1.5 text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 rounded-lg text-sm p-2.5 inline-flex items-center transition" aria-label="Toggle Menu" data-toggle-menu=""> 
       <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveaspectratio="xMidYMid meet" viewbox="0 0 24 24" class="w-6 h-6" astro-icon="tabler:menu"> <g class="icon-tabler" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"> 
         <path d="M4 8h16"></path> 
         <path d="M4 16h16"></path> 
        </g> 
       </svg> </button> 
     </div> 
    </div> 
    <nav class="items-center w-full md:w-auto hidden md:flex text-gray-600 dark:text-slate-200 h-screen md:h-auto" aria-label="Main navigation"> 
     <ul class="flex flex-col pt-8 md:pt-0 md:flex-row md:self-center w-full md:w-auto text-xl md:text-base"> 
      <li> <a id="aiedu" class="font-medium hover:text-gray-900 dark:hover:text-white px-4 py-3 flex items-center transition duration-150 ease-in-out" href="http://edu.afoo.me"> ç¦å¼ºAIå­¦å ‚</a> </li> 
      <li> <a class="font-medium hover:text-gray-900 dark:hover:text-white px-4 py-3 flex items-center transition duration-150 ease-in-out" href="http://jiagoubaike.com">æ¶æ„ç™¾ç§‘</a> </li> 
      <li> <a class="font-medium hover:text-gray-900 dark:hover:text-white px-4 py-3 flex items-center transition duration-150 ease-in-out" href="https://afoo.me/posts.html">åšå®¢æ–‡ç«  </a> </li> 
      <li> <a class="font-medium hover:text-gray-900 dark:hover:text-white px-4 py-3 flex items-center transition duration-150 ease-in-out" href="https://afoo.me/books.html">åˆ›ä½œå‡ºç‰ˆ</a> </li> 
      <li> <a class="font-medium hover:text-gray-900 dark:hover:text-white px-4 py-3 flex items-center transition duration-150 ease-in-out" href="https://store.afoo.me">äº§å“ä¸æœåŠ¡</a> </li> 
      <li> <a class="font-medium hover:text-gray-900 dark:hover:text-white px-4 py-3 flex items-center transition duration-150 ease-in-out" href="https://afoo.me/crosslinks.html">æ›´å¤šé“¾æ¥</a> </li> 
     </ul> 
     <div class="md:self-center flex items-center mb-4 md:mb-0 ml-2"> 
      <div class="hidden items-center md:flex"> <button type="button" class="text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 rounded-lg text-sm p-2.5 inline-flex items-center" aria-label="Toggle between Dark and Light mode" data-toggle-color-scheme=""> 
        <svg viewbox="0 0 24 24" class="w-5 h-5" astro-icon="tabler:sun"> <g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"> 
          <circle cx="12" cy="12" r="4"></circle> 
          <path d="M3 12h1m8-9v1m8 8h1m-9 8v1M5.6 5.6l.7.7m12.1-.7-.7.7m0 11.4.7.7m-12.1-.7-.7.7"> 
          </path> 
         </g> 
        </svg> </button> <a class="text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 rounded-lg text-sm p-2.5 inline-flex items-center" aria-label="RSS Feed" href="http://afoo.me/feeds.xml"> 
        <svg viewbox="0 0 24 24" class="w-5 h-5" astro-icon="tabler:rss"> <g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"> 
          <circle cx="5" cy="19" r="1"></circle> 
          <path d="M4 4a16 16 0 0 1 16 16M4 11a9 9 0 0 1 9 9"></path> 
         </g> 
        </svg> </a> 
      </div> 
     </div> 
    </nav> 
   </div> 
  </header> 
  <main> 
   <section class="text-gray-600 body-font relative"> 
    <div class="container px-5 py-24 mx-auto mb-12 prose prose-lg dark:prose-invert"> 
     <p class="lead"> </p>
     <h1 class="title">BuildingMicroservicesè¯»ä¹¦ç¬”è®°ä¸æ„Ÿæ‚Ÿ</h1> <small> <h3 class="author">ç‹ç¦å¼º</h3> 
      <div style="text-align: left;">
       2015-05-13
      </div> </small> 
     <p></p> <!-- random --> 
     <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-3687639021943715" data-ad-slot="2722720851" data-ad-format="auto" data-full-width-responsive="true"></ins> 
     <script>
                 (adsbygoogle = window.adsbygoogle || []).push({});
            </script> 
     <hr> 
     <p>loose coupling(interexchange) and high cohesion(autonomy), the most simple but long-lived rule for software development stand!!!</p> 
     <p>align service/functionality, person, team, organization, even bigger entitiesâ€¦</p> 
     <pre><code>bounded context  -&gt; atomic unit boundary -&gt; compositional boundaries</code></pre> 
     <blockquote> 
      <p>== Words That Make Sense In This Book ==</p> 
      <ul> 
       <li>trade short-term gain for long-term pain</li> 
       <li>Build if itâ€™s <strong>unique</strong> to what you do.</li> 
       <li>we can make a change to a single service and deploy it independently of the rest.</li> 
      </ul> 
     </blockquote> 
     <h1 id="orchestration-vs.-choreography">Orchestration VS. Choreography</h1> 
     <p>(ç»ˆäºtmdç†è§£äº†è¿™ä¸¤ä¸ªé¸Ÿå•è¯åœ¨è½¯ä»¶è¡Œä¸šé‡Œçš„ç¡®åˆ‡æ„æ€äº†â€¦)</p> 
     <p>With orchestration, we rely on a central brain to guide and drive the process, much like the conductor in an orchestra. (the coordination way)</p> 
     <p>With choreography, we inform each part of the system of its job, and let it work out the details, like dancers all finding their way and reacting to others around them in a ballet. (the fire-and-forget way)</p> 
     <p>ç±»ä¼¼äºè®¡åˆ’ç»æµ VS. å¸‚åœºç»æµï¼Œæˆ–è€…ä¸­å¤®é›†æƒ VS. åœ°æ–¹è‡ªæ²»ï¼Œthe former can be implemented in synchronous RPCs way, and the latter in asynchronous event-driven way.</p> 
     <h1 id="versioning">Versioning</h1> 
     <p>åˆšå¼€å§‹ä¸ªäººçœ‹æ³•æ˜¯ï¼Œ åœ¨URIä¸Šä¸è¦æ˜ç¡®ä½¿ç”¨versionä½œä¸ºURIçš„ä¸€éƒ¨åˆ†ï¼Œ è€Œé‡‡ç”¨é€šç”¨çš„èµ„æºæ ‡å¿—URIï¼Œ ä½†å…è®¸é€šè¿‡å‚æ•°æ¥æ˜ç¡®versionï¼Œ å¦‚æœä¸æŒ‡å®šï¼Œåˆ™é»˜è®¤è®¿é—®å·²ç»éƒ¨ç½²çš„æœ€é«˜ç‰ˆæœ¬çš„æœåŠ¡æˆ–è€…èµ„æºã€‚è¿™ç›¸å½“äºCOCçš„æ€æƒ³ä½“ç°ã€‚</p> 
     <p>ä½†åæ¥æƒ³æƒ³ï¼Œè¿™æ ·åšï¼ˆæŒ‡é‡‡ç”¨é»˜è®¤è®¿é—®latestç‰ˆæœ¬æœåŠ¡çš„æ–¹å¼ï¼‰å…¶å®å­˜åœ¨é—®é¢˜ï¼Œ å¦‚æœå®¢æˆ·ç«¯éƒ½é‡‡ç”¨é»˜è®¤ä¸åŠ ç‰ˆæœ¬çš„è®¿é—®æ–¹å¼ï¼Œä¸€æ—¦æœåŠ¡ç«¯å‡çº§é€ æˆä¸å…¼å®¹ï¼Œ é‚£ä¹ˆå®¢æˆ·ç«¯å¾ˆå¤§é¢ç§¯ä¸Šä¼šå—å½±å“ã€‚åŸåˆ™ä¸Šï¼ŒæœåŠ¡å‘å¸ƒä¸åº”è¯¥å½±å“é¢è¿™ä¹ˆå¤§ï¼</p> 
     <p>æ‰€ä»¥ï¼Œ URIä¸­æ˜ç¡®versionå¯èƒ½æ˜¯æ›´åˆé€‚çš„æ–¹å¼ï¼Œ ç”±å®¢æˆ·ç«¯æˆ–è€…æœåŠ¡è®¿é—®ç«¯è‡ªå·±å†³å®šæ˜¯å¦å‡çº§ã€‚</p> 
     <p>éµå¾ªä¸€èˆ¬Major.Minor.Patchçš„ç‰ˆæœ¬è¯­æ„ï¼Œ é€šå¸¸æƒ…å†µä¸‹ï¼Œ Minorç‰ˆæœ¬ä»¥ä¸‹çš„å‘å¸ƒï¼Œå¯¹å®¢æˆ·ç«¯æ¥è¯´åº”è¯¥æ˜¯æ²¡å½±å“çš„ã€‚ Majorç‰ˆæœ¬çš„å‘å¸ƒï¼Œåˆ™å¯èƒ½ç‰µæ‰¯åŒæ—¶å­˜åœ¨å¤šä¸ªç‰ˆæœ¬æœåŠ¡å®ä¾‹/é›†ç¾¤çš„æƒ…å†µã€‚</p> 
     <p>åŸºæœ¬åŸåˆ™åº”è¯¥æ˜¯ï¼š <strong>æœåŠ¡ä¸ç®¡å¦‚ä½•å‡çº§æ”¹é€ ï¼Œ æœåŠ¡çš„è®¿é—®è€…æœ‰æƒåˆ©å†³å®šæ˜¯å¦å‡çº§ï¼Œå³æ˜¯å¦ä½¿ç”¨æ–°ç‰ˆæœ¬çš„æœåŠ¡ï¼› ä½†æœåŠ¡æä¾›è€…æœ‰é€šçŸ¥çš„ä¹‰åŠ¡ã€‚</strong></p> 
     <h1 id="æ•°æ®åº“">æ•°æ®åº“</h1> 
     <p>æœ€å¤§çš„å…±äº«çŠ¶æ€ï¼Œ ä¹Ÿå¾€å¾€æ˜¯scalabilityæœ€å¤§çš„éšœç¢ã€‚</p> 
     <p>æœ¬è´¨ä¸Šï¼Œå¦‚æœæ ¹æ®å®ä½“è¾¹ç•Œå°†å„ä¸ªå®ä½“åˆ’åˆ†æ¸…æ™°ï¼Œ çŠ¶æ€ä¹Ÿåº”è¯¥æ˜¯å±è”½åœ¨å®ä½“å†…éƒ¨ï¼Œ è¿™é‡Œå”¯ä¸€æ¯”è¾ƒå›°éš¾çš„ä¸€ç‚¹å°±æ˜¯ï¼Œ æ•°æ®åº“è¡¨ä¹‹é—´çš„å¤–é”®å…³ç³»ã€‚ è¦è¾¾åˆ°æŒ‰ç…§å®ä½“åˆ’åˆ†æ¸…æ¥šè¾¹ç•Œçš„ç›®çš„ï¼Œ éœ€è¦æ‰“ç ´å¤–é”®ï¼ˆBreaking Foreign Key Relationshipsï¼‰ï¼Œç”±åº”ç”¨æ¥ç®¡ç†schemaä¹‹é—´çš„å…³ç³»ï¼Œè¿™é‡Œçš„schemaå…¶å®ä¹Ÿå°±å˜æˆäº†domainå®ä½“ä¹‹é—´çš„å…³ç³»äº†ã€‚å®ä½“ä¸å®ä½“ä¹‹é—´ï¼ˆæˆ–è€…è¯´æœåŠ¡ä¸æœåŠ¡ä¹‹é—´ï¼‰ï¼Œå„è‡ªçŠ¶æ€å†…èšä¸å¤–éœ²(çŠ¶æ€å°è£…)ï¼Œ åªé€šè¿‡æ¶ˆæ¯ä¼ é€’çš„æ–¹å¼è¿›è¡Œäº¤äº’ã€‚</p> 
     <h2 id="transactional-boundary">Transactional Boundary</h2> 
     <p>å¹¶éæ‰€æœ‰æœåŠ¡éƒ½æ˜¯èŒèƒ½å•ä¸€çš„ï¼Œå¾ˆå¤šæ—¶å€™å¤šç§æœåŠ¡æ˜¯è¦ååŒå·¥ä½œçš„ï¼Œè¿™ä¸ªæ—¶å€™å¾€å¾€å°±éœ€è¦ç®¡ç†äº‹åŠ¡æ€§çš„æœåŠ¡æ‰§è¡Œï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œä¼šå†è®¾ç½®ç‹¬ç«‹çš„ç»„åˆæ€§è´¨çš„æœåŠ¡æ¥ç®¡ç†è·¨å¤šä¸ªæœåŠ¡çš„äº‹åŠ¡ã€‚</p> 
     <p>å•æ•°æ®åº“ç»“ç‚¹å³å¯æ»¡è¶³éœ€æ±‚çš„æœåŠ¡ï¼Œ äº‹åŠ¡å®Œå…¨å¯ä»¥äº¤ç»™æ•°æ®åº“æ¥ç®¡ç†ï¼› ä¸€æ—¦è·³å‡ºè¿™ä¸ªèƒ½åŠ›è¾¹ç•Œï¼Œ æ¯”å¦‚è·¨åº“æˆ–è€…è·¨æœåŠ¡ï¼Œ å°±éœ€è¦é€šè¿‡å…¶å®ƒæ–¹å¼æ¥ç®¡ç†äº‹åŠ¡ã€‚</p> 
     <p>å¸¸è§çš„æ‰‹æ®µæœ‰ï¼š</p> 
     <ol type="1"> 
      <li>æ•°æ®è¡¥å¿ä¸è®¢æ­£ï¼›(the compensating/retry way)</li> 
      <li>2PCæˆ–è€…ç›¸ä¼¼æ€æƒ³çš„åˆ†å¸ƒå¼äº‹åŠ¡ç®¡ç†æ–¹å¼; (the orchestration way)</li> 
     </ol> 
     <p>ç­‰ç­‰ã€‚</p> 
     <h2 id="æŠ¥è¡¨ä¸æ•°æ®ä»“åº“">æŠ¥è¡¨ä¸æ•°æ®ä»“åº“</h2> 
     <p>å¦‚æœè¿›è¡ŒæœåŠ¡åˆ‡åˆ†ï¼Œä¸”çŠ¶æ€éšæœåŠ¡è€Œè¡Œï¼Œé‚£ä¹ˆï¼ŒåŸæ¥çš„åŸºäºæ•°æ®åŒæ­¥å’Œæ•°æ®ä»“åº“çš„æ€è·¯å°±ä¼šå—åˆ°å†²å‡»ï¼Œ ç›¸å½“äºå‰ç«¯ä¸šåŠ¡å¼€å‘ç†è§£å¹¶ç ”å‘ä¸€å¥—ç³»ç»Ÿï¼Œ åç«¯BIäººå‘˜å†ç†è§£ä¸€éï¼Œå¹¶ä»¥ä»–ä»¬è®¤ä¸ºçš„å½¢å¼å†ç ”å‘ä¸€å¥—ç³»ç»Ÿï¼Œ å®é™…ä¸Šï¼Œå°±åç«¯ç³»ç»Ÿçš„æœåŠ¡å‹åŠ›æ¥è¯´ï¼Œ ç›´æ¥ç”±å‰ç«¯æœåŠ¡ç»Ÿä¸€æ¥ç®¡å¹¶æœåŠ¡ä¹‹åº”è¯¥ä¹Ÿæœªå°ä¸å¯ï¼Œåº”è¯¥ä¸åƒä¹‹å‰é¢„æƒ³çš„é‚£ä¹ˆææ€–å§ï¼Ÿï¼</p> 
     <p>æŠ¥è¡¨ä¹Ÿå¥½ï¼Œ BIå…¶å®ƒéœ€æ±‚ä¹Ÿç½¢ï¼Œ æœ¬è´¨ä¸Šæ˜¯æ ¹æ®éœ€æ±‚èšåˆå¹¶åˆ†ææ•°æ®(the aggregated view of data/state)ï¼Œ ç›´æ¥æ…æ•°æ®åº“å½“ç„¶æœ€ç›´æ¥ï¼Œä½†é€šè¿‡ç»Ÿä¸€å°è£…çš„æœåŠ¡æ¥åšè¿™ç§äº‹æƒ…ä¹Ÿæœªå°ä¸å¯ï¼Œ latencyï¼Ÿ åº”è¯¥ä¸æ˜¯æ ¸å¿ƒé—®é¢˜å§ï¼</p> 
     <p>å¦å¤–ä¸€ç§æ€è·¯æ˜¯ï¼Œ æœåŠ¡çŠ¶æ€å¯ä»¥å¼€æ”¾è®¢é˜…ï¼Œéœ€è¦çŠ¶æ€äº‹ä»¶å˜æ›´çš„ä¸‹æ¸¸ç³»ç»Ÿå¯ä»¥ç›´æ¥è®¢é˜…æ•°æ®ï¼Œæ±‡æ€»åˆ°è‡ªå·±çš„å­˜å‚¨ï¼Œå†å€ŸåŠ©å­˜å‚¨çš„æ”¯æŒåšåˆ†æã€‚</p> 
     <p>æœ¬è´¨ä¸Šï¼Œ è¿˜æ˜¯Orchestrationå’ŒChoreographyä¸¤ç§æ€è·¯çš„ä½“ç°ï¼Œ éäº’æ–¥å…³ç³»ï¼Œ å®Œå…¨å¯ä»¥æ ¹æ®å…·ä½“åœºæ™¯ç»„åˆä½¿ç”¨ã€‚</p> 
     <h1 id="deployment-artifacts">Deployment Artifacts</h1> 
     <p>åˆ¶ä½œself-contained deployable microservices as artifacts</p> 
     <h2 id="platform-specific-artifacts">Platform-Specific Artifacts</h2> 
     <p>aka. technology-specific artifacts, like gem, jar, npm, etc..</p> 
     <h2 id="operating-system-artifacts">Operating System Artifacts</h2> 
     <blockquote> 
      <p>One way to avoid the problems associated with technology-specific artifacts is to create artifacts that are native to the underlying operating system.</p> 
     </blockquote> 
     <p>say, rpm for redhat/centos, deb for debian/ubuntu, msi for windows</p> 
     <p>å‡å°‘æ”¯æŒçš„æ“ä½œç³»ç»Ÿç±»å‹çš„æ•°é‡ä»¥é¿å…æ— å¿…è¦çš„èµ„æºæŠ•å…¥ã€‚</p> 
     <p>åˆ¶ä½œè‡ªå®šä¹‰çš„Imageæ™¯è±¡ï¼Œå‡å°‘ä¸å¿…è¦çš„provisioningè¿‡ç¨‹å’Œé‡å¤ï¼ˆOne approach to reducing this spin-up time is to create a virtual machine image that bakes in some of the common dependencies we useï¼‰ã€‚</p> 
     <p>åœ¨ç»„ç»‡å±‚æ¬¡ä¸è¶³ä»¥æ”¯æ’‘å’Œcoveræ–°æŠ€æœ¯æ ˆçš„æƒ…å†µä¸‹ï¼Œä¸å»ºè®®ä½¿ç”¨dockerä¹‹ç±»çš„å®¹å™¨ImageæŠ€æœ¯ï¼Œè™½ç„¶å±äºå‘å¸ƒçš„artifactçš„å½¢å¼ä¹‹ä¸€ï¼Œä½†ç‰µæ‰¯åˆ°å‘¨è¾¹ç³»ç»Ÿçš„å·¥ä½œä¹Ÿä¼šéœ€è¦å˜æ›´ï¼ŒåŒ…æ‹¬äººå‘˜ï¼Œå·¥ä½œæµç¨‹ç­‰ã€‚ â€œå…ˆè¿›çš„ï¼Œå¾€å¾€ä¹Ÿæ˜¯è½åçš„â€ï¼</p> 
     <h1 id="service-to-host-mapping">Service-to-Host Mapping</h1> 
     <p>å•èŠ‚ç‚¹éƒ¨ç½²å¤šæœåŠ¡çš„æƒ…å†µï¼Œä¸»è¦éœ€è¦è€ƒè™‘èµ„æºéš”ç¦»çš„é—®é¢˜ã€‚</p> 
     <p>å•èŠ‚ç‚¹éƒ¨ç½²å•ä¸€æœåŠ¡çš„æƒ…å†µï¼Œä¸»è¦éœ€è¦è§£å†³èµ„æºåˆ©ç”¨ç‡çš„é—®é¢˜ã€‚</p> 
     <p>å…³æ³¨é‚£å¥è€è¯ï¼š<code>threads don't scale, processes do.</code></p> 
     <h2 id="virtualization">Virtualization</h2> 
     <blockquote> 
      <ul> 
       <li>Type 1 virtualization refers to technology where the VMs run directly on hardware, not on top of another operating system.</li> 
       <li>Type 2 virtualization, AWS, VMWare, VSphere, Xen, and KVMâ€¦</li> 
      </ul> 
     </blockquote> 
     <blockquote> 
      <p>if you donâ€™t trust the code you are running, donâ€™t expect that you can run it in a container and be safe. If you need that sort of isolation, youâ€™ll need to consider using virtual machines instead.</p> 
     </blockquote> 
     <p>â€œAfter many years of working in this space, I am convinced that the most sensible way to trigger any deployment is via a single, parameterizable command-line call.â€, å®é™…ä¸Šï¼Œ å‘½ä»¤è¡Œåªæ˜¯ä¸€ç§è¡¨ç°å½¢å¼ï¼Œ ä½ å½“ç„¶å¯ä»¥æŠŠæ ¸å¿ƒåŠŸèƒ½ç”¨shellè„šæœ¬æ¥å†™ï¼Œä½†æ ¸å¿ƒåŠŸèƒ½åªè¦é›†ä¸­ç®¡ç†ä¹‹åï¼Œ å‘½ä»¤è¡Œä¹Ÿå¥½ï¼Œ æ“ä½œé¡µé¢ä¹Ÿç½¢ï¼Œéƒ½åªæ˜¯æ ¸å¿ƒåŠŸèƒ½çš„ä¸€ç§å»¶ä¼¸å½¢å¼ç½¢äº†ã€‚</p> 
     <h1 id="test">Test</h1> 
     <p>as long as you understand that test design and performing help you to design and implement your services/systems better, you will find the way to do the test properly.</p> 
     <p>So, I skip this section.</p> 
     <h1 id="monitoring">Monitoring</h1> 
     <p>æˆ‘åšæŒâ€No News Is The Good Newsâ€åŸåˆ™ï¼</p> 
     <ol type="1"> 
      <li>Alertæ˜¯åç»§æµç¨‹çš„èµ·ç‚¹ï¼Œand <strong>Identity</strong> Matters here! 
       <ul> 
        <li>Including <code>Correlation ID</code>s</li> 
        <li>artifactId is not enough, mix everything about environment together like host, IDC, etc.</li> 
       </ul></li> 
      <li>Interconnections smooth the process!<br> </li> 
      <li>Convention and Consistency saves your ass too!</li> 
      <li>è·³å‡ºå•æœºæ€ç»´ï¼Œ æ„å»ºå¹³å°ç”Ÿæ€åœˆï¼ 
       <ul> 
        <li>
         <blockquote> 
          <p>monitor the small things, and use aggregation to see the bigger picture.</p> 
         </blockquote></li> 
        <li>
         <blockquote> 
          <p>away from systems specialized to do just one thing, and toward generic event processing systems that allow you to look at your system in a more holistic way.</p> 
         </blockquote></li> 
        <li>logs(kibana), system metrics(dashboard which can help drill things down, like <a href="http://graphite.wikidot.com/">Graphite</a> or zabbix)ï¼Œ application metrics(JMX, <a href="https://github.com/dropwizard/metrics">dropwizard/metrics</a>)</li> 
       </ul></li> 
     </ol> 
     <p>å®è¡Œâ€˜è®¡åˆ’ç»æµâ€™ï¼Œ å»ä»–å¦ˆçš„â€˜å¸‚åœºç»æµâ€™ï¼Œè¿™é‡Œæ ¹æœ¬ä¸éœ€è¦åè€…ï¼</p> 
     <h2 id="ç›‘æ§çš„å†…ä¸å¤–">ç›‘æ§çš„å†…ä¸å¤–</h2> 
     <p>å¤§éƒ¨åˆ†æƒ…å†µä¸‹æˆ‘ä»¬ä¼šå…³æ³¨èº«ä½“å†…éƒ¨çš„æƒ…å†µ(å„ç§agentsï¼Œå„ç§logs, å„ç§metricsï¼Œè¯¸å¦‚æ­¤ç±»)ï¼Œä½†å®é™…ä¸Šï¼Œæˆ‘ä»¬æœ€å¥½åŒæ—¶ä¹Ÿå¯¹åˆ«äººæ€ä¹ˆçœ‹æˆ‘ä»¬æœ‰ä¸€ä¸ªèµ·ç åŸºç¡€çš„è®¤è¯†ï¼Œ æ¯”å¦‚ä½¿ç”¨synthetic monitoringä¹‹ç±»çš„æ‰‹æ®µæ¥æ¨¡æ‹Ÿç”¨æˆ·è®¿é—®ï¼Œçœ‹çœ‹æˆ‘ä»¬çš„æä¾›æ˜¯å¦æ­£å¸¸ã€‚</p> 
     <h1 id="security">Security</h1> 
     <h2 id="authentication-authorization">Authentication &amp; Authorization</h2> 
     <p>è·Ÿå“¥æ•´åˆæŒ–è´¢å†…ç½‘å¸å·ä½“ç³»å’Œç³»ç»Ÿçš„æ€è·¯ç›¸ä¼¼ï¼Œ å¶çš„åŸºæœ¬æ€è·¯å°±æ˜¯ï¼Œ â€œç¡®å®šIdentityï¼Œ è®©éµå¾ªIdentityè§„èŒƒçš„ç³»ç»Ÿåœ¨åŸºæœ¬å‰æä¸‹æ ¹æ®å„è‡ªæƒ…å†µflurish(especially, fine-grained authorization)â€</p> 
     <blockquote> 
      <p>tradeoffs between Shiro and Spring Security with authorization framework.</p> 
     </blockquote> 
     <h1 id="system-design">System Design</h1> 
     <blockquote> 
      <ul> 
       <li>Any organization that designs a system (defined more broadly here than just information systems)will inevitably produce a design whose structure is a copy of the organizationâ€™s communicationstructure.</li> 
      </ul> 
     </blockquote> 
     <blockquote> 
      <ul> 
       <li>Adapting to Communication Pathways</li> 
      </ul> 
     </blockquote> 
     <p>ç»„ç»‡ç»“æ„ä¹Ÿè¦â€œé«˜å†…èšï¼Œä½è€¦åˆâ€ã€‚</p> 
     <blockquote> 
      <p>Service Ownership</p> 
     </blockquote> 
     <p>æˆ‘ä»¬å®è¡ŒPOåˆ¶åº¦ï¼Œä¹Ÿæ˜¯åŒæ ·çš„é“ç†, èŒè´£ä¸æ¸…ï¼Œçº ç¼ æ‰¯çš®çš„äº‹å„¿å°±å¤šã€‚</p> 
     <h1 id="å·¥å…·å‚è€ƒ">å·¥å…·å‚è€ƒ</h1> 
     <ol type="1"> 
      <li><a href="https://github.com/jordansissel/fpm/wiki">fpm - Effing Package Management</a></li> 
      <li><a href="https://www.packer.io/">Packer is a tool for creating identical machine images for multiple platforms from a single source configuration.</a></li> 
     </ol> 
     <h1 id="å•è¯ä¸è¯ç»„å­¦ä¹ å¤ä¹ ">å•è¯ä¸è¯ç»„å­¦ä¹ /å¤ä¹ </h1> 
     <ol type="1"> 
      <li>inhibit, [Éªnâ€™hÉªbÉªt] , v., æŠ‘åˆ¶ï¼›é˜»æ­¢ï¼›ä½¿ä¸èƒ½ 
       <ul> 
        <li>e.g.&nbsp;Distributed Transaction cand inhibit scaling.</li> 
        <li>åŒºåˆ«äºinhabit, v.å±…ä½äºï¼›å æ®ï¼›æ –æ¯</li> 
        <li>å¯ä»¥å¼•ç”³è”æƒ³åˆ°prohibitive</li> 
       </ul></li> 
      <li>perilous, [â€™perÉ™lÉ™s], adj.å±é™©çš„ï¼›å†’é™©çš„ 
       <ul> 
        <li>The snow and the blackout combined to make motoring perilous - å¤§é›ªåŠ ä¸Šç¯ç«ç®¡åˆ¶ä½¿å¾—è½¦è¾†è¡Œé©¶æˆäº†å±é™©çš„äº‹ã€‚</li> 
       </ul></li> 
      <li>lull, [lÊŒl], v.ä½¿å®‰é™ï¼›ä½¿å…¥ç¡ï¼›å“„éª—ï¼›å¹³æ¯, n.æš‚åœï¼›é—´æ­‡ 
       <ul> 
        <li>The mother lulled the baby to sleep.</li> 
        <li>They lulled me into a false sense of security.</li> 
       </ul></li> 
     </ol> 
     <h1 id="ç›¸å…³æ–‡ç« ">ç›¸å…³æ–‡ç« </h1> 
     <ol type="1"> 
      <li><a href="http://nginx.com/blog/introduction-to-microservices/">Introduction to Microservices</a></li> 
     </ol> <!-- tail --> 
     <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-3687639021943715" data-ad-slot="7874087130" data-ad-format="auto" data-full-width-responsive="true"></ins> 
     <script>
                 (adsbygoogle = window.adsbygoogle || []).push({});
            </script> 
     <hr> 
     <div> <a href="/posts.html"> <b> &gt;&gt;&gt;&gt;&gt;&gt; æ›´å¤šé˜…è¯» &lt;&lt;&lt;&lt;&lt;&lt; </b></a> 
     </div> 
     <div id="random_posts"> 
      <div class="alert alert-light" role="alert"> <a href="/posts/2023-06-28-essential-of-LLM-frameworks-and-application.html">LLMæ¡†æ¶ä¸åº”ç”¨è¦è§£å†³çš„é—®é¢˜çš„æœ¬è´¨ </a> 
      </div> 
      <div class="alert alert-light" role="alert"> <a href="/posts/2009-05-28-jia-di-er.html">å®¶åº•å„¿ </a> 
      </div> 
      <div class="alert alert-light" role="alert"> <a href="/posts/2015-07-21-scala-developers-springboot-guide.html">Scalaå¼€å‘è€…çš„SpringBootå¿«é€Ÿå…¥é—¨æŒ‡å— </a> 
      </div> 
     </div> 
     <hr> 
     <div id="comments"></div> 
     <hr> 
     <div> 
      <p> ã€Œä¸ºAIç–¯ç‹‚ã€æ˜Ÿçƒä¸Šï¼Œæ‰¶å¢™è€å¸ˆæ­£åœ¨å’Œæœ‹å‹ä»¬è®¨è®ºæœ‰è¶£çš„AIè¯é¢˜ï¼Œä½ è¦ä¸è¦â¼€èµ·æ¥å‘€ï¼Ÿ^-^<br> è¿™é‡Œ </p>
      <ol> 
       <li>ä¸ä½†æœ‰åŠæ—¶æ–°é²œçš„AIèµ„è®¯å’Œæ·±åº¦æ¢è®¨</li> 
       <li>è¿˜åˆ†äº«AIå·¥å…·ã€äº§å“æ–¹æ³•å’Œå•†ä¸šæœºä¼š</li> 
       <li>æ›´æœ‰ä½“ç³»åŒ–ç²¾å“ä»˜è´¹å†…å®¹ç­‰ç€ä½ ï¼Œ<a href="https://t.zsxq.com/0dI3ZA0sL">åŠ å…¥æ˜Ÿçƒ(https://t.zsxq.com/0dI3ZA0sL)</a> å³å¯å…è´¹é¢†å–ã€‚(åŠ å…¥ä¹‹å<b>ä¸€å®šè®°å¾—çœ‹ç½®é¡¶æ¶ˆæ¯</b>å‘€ï¼)</li> 
      </ol> 
      <p></p> <a href="https://t.zsxq.com/0dI3ZA0sL"> <img src="/posts/images/2023-05-06-12-09-53.jpg" alt="çŸ¥è¯†æ˜ŸçƒäºŒç»´ç "> </a> 
     </div> 
     <hr> 
     <p> <span style="font-size: xx-large;"> å¼€å¤©çª—ï¼Œæ‹‰è®¤çŸ¥ï¼Œè®¢é˜…ã€Œç¦æŠ¥ã€ï¼Œå³åˆ»æ‹¥æœ‰è‡ªå·±çš„å…¨æ¨¡æ€äººå·¥æ™ºèƒ½ã€‚ </span> </p> <a href="https://wfq.gumroad.com/l/fb"> <img src="/images/fb_subscribe_v2.jpg" alt="è®¢é˜…ã€Œç¦æŠ¥ã€"> </a> 
     <hr> 
     <div hx-get="https://toolfooter.afoo.me/" hx-trigger="revealed" htmx-indicator="#tfloader"> 
      <div id="tfloader" class="x-indicator"> 
       <svg width="57" height="57" viewbox="0 0 57 57" xmlns="http://www.w3.org/2000/svg" stroke="#3F83F8"> <g fill="none" fill-rule="evenodd"> 
         <g transform="translate(1 1)" stroke-width="2"> 
          <circle cx="5" cy="50" r="5"> 
           <animate attributename="cy" begin="0s" dur="2.2s" values="50;5;50;50" calcmode="linear" repeatcount="indefinite" /> 
           <animate attributename="cx" begin="0s" dur="2.2s" values="5;27;49;5" calcmode="linear" repeatcount="indefinite" /> 
          </circle> 
          <circle cx="27" cy="5" r="5"> 
           <animate attributename="cy" begin="0s" dur="2.2s" from="5" to="5" values="5;50;50;5" calcmode="linear" repeatcount="indefinite" /> 
           <animate attributename="cx" begin="0s" dur="2.2s" from="27" to="27" values="27;49;5;27" calcmode="linear" repeatcount="indefinite" /> 
          </circle> 
          <circle cx="49" cy="50" r="5"> 
           <animate attributename="cy" begin="0s" dur="2.2s" values="50;50;5;50" calcmode="linear" repeatcount="indefinite" /> 
           <animate attributename="cx" from="49" to="49" begin="0s" dur="2.2s" values="49;5;27;49" calcmode="linear" repeatcount="indefinite" /> 
          </circle> 
         </g> 
        </g> 
       </svg> 
      </div> 
     </div> 
    </div> 
   </section> 
  </main> 
  <footer class="border-t border-gray-200 dark:border-slate-800"> 
   <div class="max-w-6xl mx-auto px-4 sm:px-6"> 
    <div class="md:flex md:items-center md:justify-between py-6 md:py-8"> 
     <ul class="flex mb-4 md:order-1 -ml-2 md:ml-4 md:mb-0"> 
      <li> <a class="text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 rounded-lg text-sm p-2.5 inline-flex items-center" aria-label="Twitter" href="https://twitter.com/fujohnwang"> 
        <svg viewbox="0 0 24 24" class="w-5 h-5" astro-icon="tabler:brand-twitter"> <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84 0 0 0 .497-3.753C20.18 7.773 21.692 5.25 22 4.009z"> 
         </path> 
        </svg> </a> </li> 
      <li> <a class="text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 rounded-lg text-sm p-2.5 inline-flex items-center" aria-label="Facebook" href="https://www.facebook.com/fujohnwang/"> 
        <svg viewbox="0 0 24 24" class="w-5 h-5" astro-icon="tabler:brand-facebook"> <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 10v4h3v7h4v-7h3l1-4h-4V8a1 1 0 0 1 1-1h3V3h-3a5 5 0 0 0-5 5v2H7"></path> 
        </svg> </a> </li> 
      <li> <a class="text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 rounded-lg text-sm p-2.5 inline-flex items-center" aria-label="Github" href="https://github.com/fujohnwang"> 
        <svg viewbox="0 0 24 24" class="w-5 h-5" astro-icon="tabler:brand-github"> <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6 0 0 0-1.3-3.2 4.2 4.2 0 0 0-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3 0 0 0-6.2 0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2 0 0 0-.1 3.2A4.6 4.6 0 0 0 4 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"> 
         </path> 
        </svg> </a> </li> 
     </ul> 
     <div class="text-sm text-gray-700 mr-4 dark:text-slate-400"> <span class="w-5 h-5 md:w-6 md:h-6 md:-mt-0.5 bg-cover mr-1.5 float-left rounded-sm"> <img src="https://afoo.me/favicon.svg" class="rounded-md" alt> </span> Copyright Â© ç‹ç¦å¼ºä¸ªäººç‰ˆæƒæ‰€æœ‰ - Since 2004 (Everything is homebrewed with <a href="https://pandoc.org/">Pandoc</a> and Markdown, little <a href="https://www.scala-lang.org/">Scala</a> also included.) 
     </div> 
    </div> 
   </div> 
  </footer> 
  <script>
        // Set "light" theme as default
        if (!localStorage.theme) {
            localStorage.theme = "light";
        }

        if (
            localStorage.theme === 'dark' ||
            (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)
        ) {
            document.documentElement.classList.add('dark');
        } else {
            document.documentElement.classList.remove('dark');
        }

        function attachEvent(selector, event, fn) {
            const matches = document.querySelectorAll(selector);
            if (matches && matches.length) {
                matches.forEach((elem) => {
                    elem.addEventListener(event, () => fn(elem), false);
                });
            }
        }

        window.onload = function () {
            attachEvent('[data-toggle-menu]', 'click', function (elem) {
                elem.classList.toggle('expanded');
                document.body.classList.toggle('overflow-hidden');
                document.getElementById('header')?.classList.toggle('h-screen');
                document.querySelector('#header nav')?.classList.toggle('hidden');
            });
            attachEvent('[data-toggle-color-scheme]', 'click', function () {
                document.documentElement.classList.toggle('dark');
                localStorage.theme = document.documentElement.classList.contains('dark') ? 'dark' : 'light';
            });
        };
        window.onpageshow = function () {
            const elem = document.querySelector('[data-toggle-menu]');
            if (elem) {
                elem.classList.remove('expanded');
            }
            document.body.classList.remove('overflow-hidden');
            document.getElementById('header')?.classList.remove('h-screen');
            document.querySelector('#header nav')?.classList.add('hidden');
        };
    </script> 
  <script type="text/javascript">
        var gitalk = new Gitalk({
          clientID: '518a605d711883414ac0',
          clientSecret: '69fb8ccc0616c5bcbc64d24ece0d06d279da91ff',
          repo: 'afoo.me.comments',
          owner: 'fujohnwang',
          admin: ['fujohnwang'],
          id: location.pathname.substring(0, 49),      // Ensure uniqueness and length less than 50
          distractionFreeMode: false  // Facebook-like distraction free mode
        })
        gitalk.render('comments')
    </script> 
  <script src="https://formspree.io/js/formbutton-v1.min.js" defer></script> 
  <script>
  /* paste this line in verbatim */
  window.formbutton=window.formbutton||function(){(formbutton.q=formbutton.q||[]).push(arguments)};
  /* customize formbutton below*/     
  formbutton("create", {
    action: "https://formspree.io/f/xknlpkkd",
    title: "æœ‰ä»€ä¹ˆå¯ä»¥å¸®åˆ°æ‚¨ï¼ŸğŸ’•ğŸ’•ğŸ’• How can I help you?",
    fields: [
      { 
        type: "email", 
        label: "æ‚¨çš„ç”µå­é‚®ç®±ï¼ˆæ–¹ä¾¿ä¸æ‚¨è”ç³»ï¼‰:", 
        name: "email",
        required: true,
        placeholder: "your@email.com"
      },
      {
        type: "textarea",
        label: "æ‚¨æƒ³æäº¤çš„åé¦ˆå’Œè¯¢é—®ä¿¡æ¯:",
        name: "message",
        placeholder: "What's on your mind?",
      },
      { type: "submit" }      
    ],
    styles: {
      title: {
        backgroundColor: "blue"
      },
      button: {
        backgroundColor: "blue"
      }
    }
  });
</script> 
  <script>
	// tooltips
	tippy('#aiedu', {
        content: "As to AI nowadays, LLM and Stable Diffusion are hot even hottest among them, If your want to both know-why and know-how with them, instead of only know-how which can't repeat itself, you should get you to https://ai.afoo.me right now â—"
    });  
</script>  
 </body>
</html>