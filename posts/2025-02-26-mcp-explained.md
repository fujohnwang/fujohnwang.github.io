% ä¸€ç¯‡çœ‹æ‡‚MCP
% ç‹ç¦å¼º
% 2025-02-26

å°±ä¸Šä¸€ç¯‡[ã€Œä¸ºä»€ä¹ˆåªæœ‰è¿™ç§MCP Serverç«äº†ï¼Ÿã€](https://afoo.me/posts/2025-02-26-why-tool-mcp-server-rocks.html)

æœ‰åŒå­¦åœ¨ã€Œç¦å¼ºæŠ€é™¢ã€ç¾¤é‡Œè·Ÿæˆ‘äº‰è®ºï¼Œæˆ‘æåˆ°çš„Toolå°±æ˜¯function callingï¼Œ æ€ä¹ˆè¯´å‘¢ï¼Œå¯ä»¥è¯´æ˜¯ï¼Œä¹Ÿå¯ä»¥è¯´ä¸æ˜¯ã€‚ 

è¯´æ˜¯ï¼Œæ˜¯å› ä¸ºï¼Œmcp serverè¿™ä¸€ç«¯ç¡®å®åœ¨å®ç°æœºåˆ¶ä¸Šå±äºfunction executionï¼›

è¯´ä¸æ˜¯ï¼Œæ˜¯å› ä¸ºï¼Œä¸Šä¸€ç¯‡æˆ‘æ›´å¤šæ˜¯æƒ³è¡¨è¾¾ä¸€ç§äº§å“å’Œé€»è¾‘è§†å›¾å±‚é¢çš„æ¦‚å¿µï¼Œå±äºç®€åŒ–æ¦‚å¿µï¼Œå¹¶ä¸æ˜¯è¦ä¸¥æ ¼è®¨è®ºæŠ€æœ¯åº•å±‚åŸç†ã€‚ æ¯•ç«Ÿï¼Œå®˜æ–¹åœ¨è§£é‡ŠMCP Serverè¿™ä¸ªToolèƒ½åŠ›çš„æ—¶å€™ï¼Œä¹Ÿåªæ˜¯ç¬¼ç»Ÿçš„è¯´æ˜¯Model-Controlledï¼Œä½†å…¶å®è¯¦ç»†æªå‡ºæ¥è®²ï¼Œå®˜æ–¹æ–‡æ¡£è¯´çš„ä¹Ÿæœ‰é—®é¢˜ï¼Œæ›´ç¡®åˆ‡åœ°è¯´ï¼Œåº”è¯¥ç®—Agent Controlledï¼š

![](./images/mcp-server-capabilities.jpg)

ä¸è¿‡ï¼Œæ—¢ç„¶æ‰¯åˆ°è¿™é‡Œäº†ï¼Œæˆ‘å°±å°è¯•ç”¨ä¸€ç¯‡æ¥è¯¦ç»†è®²è®²MCPåœ¨æ•´ä¸ªAIçš„ç”Ÿæ€é‡Œåˆ°åº•æ˜¯æ€ä¹ˆä¸€å›äº‹å§ï¼

é¦–å…ˆï¼Œå¤§å®¶ä¸€å®šçœ‹è¿‡ç±»ä¼¼ä¸‹é¢è¿™å¹…å›¾ï¼Œä¸ºäº†é¿å…ç‰ˆæƒçº çº·ï¼Œæˆ‘é‡æ–°ç”»äº†ä¸‹ï¼š

![](./images/ai-ml-dl-nlp.png)

ä¹Ÿå°±æ˜¯è¯´ï¼ŒAIæ˜¯æœ€æ³›åŒ–çš„æ¦‚å¿µï¼Œ MLï¼ˆæœºå™¨å­¦ä¹ ï¼‰æ˜¯AIçš„ä¸€ä¸ªå­é›†æ¦‚å¿µï¼Œ DLï¼ˆæ·±åº¦å­¦ä¹ ï¼‰æ˜¯MLçš„ä¸€ä¸ªå­é›†æ¦‚å¿µï¼Œå†è¿›è€ŒNLPï¼ˆè‡ªç„¶è¯­è¨€å¤„ç†ï¼‰åˆæ˜¯DLçš„ä¸€ä¸ªå­é›†æ¦‚å¿µã€‚

ä»Šå¤©æˆ‘ä»¬è°ˆåˆ°å¤§æ¨¡å‹ï¼ˆå¤§è¯­è¨€æ¨¡å‹çš„ç®€ç§°ï¼Œè‹±æ–‡ç®€ç§°LLMï¼Œå³Large Language Modelï¼‰ï¼Œ å±äºNLPé¢†åŸŸçš„æ¦‚å¿µã€‚

ç°åœ¨ï¼Œè®©æˆ‘ä»¬èšç„¦åˆ°ä»Šå¤©æ›´å¤šå›´ç»•ç€å¤§æ¨¡å‹ï¼ˆLLMï¼‰å±•å¼€çš„åº”ç”¨ä¸ç ”å‘å›¾æ™¯ä¸­ï¼š

![](./images/ai-agent-llm.png)

æœ‰äººè¯´2025å¹´æ˜¯AI Agentå…ƒå¹´ï¼Œ è¿™é‡Œçš„AI Agentå…¶å®å°±æ˜¯å›´ç»•ç€LLMæ‰“é€ çš„ä¸€ç§AIåº”ç”¨ï¼Œåªä¸è¿‡ï¼ŒAIåº”ç”¨è¿™ä¸ªæ¦‚å¿µå¯ä»¥å¾ˆæ³›åŒ–ï¼Œ æ‰€ä»¥ï¼Œ AI Agentç®—æ˜¯AIåº”ç”¨çš„ä¸€ç§å­é›†æ¦‚å¿µã€‚

é‚£ä¸€ä¸ªAI Agenté€šå¸¸æ˜¯ç”±å“ªäº›éƒ¨åˆ†ç»„æˆçš„å‘¢ï¼Ÿ

![](./images/agent-inside.png)

ä¸€ä¸ªAI Agenté¦–å…ˆä¼šåŒ…å«ä¸€ä¸ªæˆ–è€…å¤šä¸ªå¤§æ¨¡å‹åšè‡ªç„¶è¯­è¨€åˆ°æœ€ç»ˆç»“æœçš„è§„åˆ’ä¸å†³ç­–ï¼Œ è¿™ä¸ªä¸€èˆ¬æ˜¯å¿…é¡»çš„ã€‚

å¦å¤–ä¸€ä¸ªæ¯”è¾ƒå…¸å‹çš„ç»„ä»¶å°±æ˜¯å·¥å…·ï¼ˆtooluseï¼‰ï¼Œæ‰€ä»¥ï¼Œä»»ä½•agentå¼€å‘æ¡†æ¶åœ¨é…ç½®å¯åŠ¨ä¹‹å‰ï¼Œéƒ½ä¼šç»™ä½ ä¸€ä¸ªæœºä¼šç»™ä¸€ä¸ªåå­—é€šå¸¸å«toolsçš„å‚æ•°ä¼ å…¥å‚æ•°å€¼ï¼Œå…¶å®å°±æ˜¯å‘Šè¯‰Agentå®ƒæœ‰å“ªäº›å·¥å…·å¯ä»¥ç”¨ã€‚

è‡³äºå…¶ä»–çš„Agentç»„ä»¶æˆ–è€…åŠŸèƒ½ï¼Œåˆ™å¯ä»¥æ ¹æ®æƒ…å†µæ·»åŠ ï¼Œè¿™äº›ä¸åœ¨ä»Šå¤©MCPä¸»çº¿ä¸Šï¼Œæ‰€ä»¥æŠ›å¼€ä¸æã€‚

ç°åœ¨è¯´Function Callingï¼š

![](./images/tooluse-function-calling.png)

Function Callingç®—æ˜¯æŸç§tooluseï¼Œ å®ƒå…¶å®åˆ†ä¸¤æ®µï¼ˆæˆ‘ç»™æ€»ç»“çš„ï¼Œä½ å¯ä»¥ä¸ä¿¡ğŸ˜‰ï¼‰ï¼š

1. Functionè°ƒç”¨å‡†å¤‡é˜¶æ®µ
2. Functionæ‰§è¡Œé˜¶æ®µ

æˆ‘ä»¬é€šå¸¸ç‹­ä¹‰ä¸Šè®²çš„Function Callingå…¶å®æŒ‡çš„å°±æ˜¯ç¬¬ä¸€é˜¶æ®µï¼ˆFunctionè°ƒç”¨å‡†å¤‡é˜¶æ®µï¼‰ï¼Œ å°†å‡½æ•°æè¿°é€šè¿‡toolså‚æ•°ï¼ˆæ¯”å¦‚Open AIçš„APIï¼‰æ‰”ç»™å¤§æ¨¡å‹ï¼Œç„¶åå¤§æ¨¡å‹åœ¨ç‰¹å®šåœºæ™¯å’Œæ„å›¾è¯†åˆ«åˆ°ä¹‹åå°±å¯ä»¥è¿”å›å‡½æ•°è°ƒç”¨çš„å‚æ•°å€¼ï¼Œ ç„¶åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ‹¿ç€è¿™ä¸ªå‚æ•°å€¼å»è°ƒç”¨çœŸæ­£çš„å‡½æ•°è®©å®ƒæ‰§è¡Œäº†ã€‚

ä¹Ÿå°±æ˜¯è¯´ï¼Œå‡½æ•°çš„æ‰§è¡Œï¼Œé€šå¸¸ä¸åœ¨å¤§æ¨¡å‹ï¼ˆLLMï¼‰ä¹‹å†…ï¼Œè¿™ä¸ªè¾¹ç•Œå¾ˆé‡è¦ï¼Œå¼ºè°ƒä¸‹ğŸ˜‰

æœ‰äº†ä¸Šé¢çš„é“ºå«ï¼Œæˆ‘ä»¬åœ¨çœ‹MCPçš„ç»“æ„ï¼š

![](./images/mcphost-mcpserver.png)

MCPç»“æ„é‡Œæœ‰ä¸‰ä¸ªä¸»è¦è§’è‰²æˆ–è€…èŒèƒ½æ–¹ï¼š

1. mcp host
2. mcp client
3. mcp server

mcp serverç›¸å¯¹æ¯”è¾ƒç‹¬ç«‹ï¼Œå¯ä»¥ç‹¬ç«‹å¼€å‘ï¼Œç‹¬ç«‹éƒ¨ç½²ï¼Œå¯ä»¥è¿œç¨‹éƒ¨ç½²ï¼Œä¹Ÿå¯ä»¥æœ¬åœ°éƒ¨ç½²ï¼ˆä»Šå¤©å¾ˆå¤šAI IDEå…¶å®éƒ½æ˜¯æœ¬åœ°éƒ¨ç½²è°ƒç”¨ï¼‰ã€‚

é‚£è¿™äº›mcp serveræ€ä¹ˆç”¨å‘¢ï¼Ÿ

mcp hostç¨‹åºæ¥ç”¨ã€‚

mcp hostå¯ä»¥æ˜¯æŸä¸ªAI IDEï¼Œä¹Ÿå¯ä»¥æ˜¯ä½ è‡ªå·±å¼€å‘çš„AIç¨‹åºã€‚

mcp hostå†…éƒ¨é€šå¸¸ä¹Ÿä¼šæœ‰é’ˆå¯¹å¤§æ¨¡å‹çš„å¼•ç”¨ï¼Œ è¿˜æœ‰ä¸€ä¸ªå…³é”®ç»„ä»¶ï¼Œä¹Ÿå°±æ˜¯mcp clientã€‚

mcp clientè´Ÿè´£ä¸mcp serveré€šä¿¡ï¼Œå¹¶è°ƒç”¨mcp serverçš„å„é¡¹èƒ½åŠ›ï¼Œæ¯”å¦‚æˆ‘ä»¬æåˆ°çš„mcp serverçš„Toolèƒ½åŠ›ã€‚

é‚£è°åˆæ¥é©±åŠ¨mcp clientå»è°ƒç”¨mcp serverå‘¢ï¼Ÿ 

ç­”æ¡ˆæ˜¯mcp hostç¨‹åºã€‚

mcp hostç¨‹åºä¼šè°ƒç”¨mcp clientæ‹‰å–mcp serveræœ‰å“ªäº›èƒ½åŠ›ï¼Œç„¶ååœ¨promptå¤§æ¨¡å‹çš„æ—¶å€™æŠŠè¿™äº›èƒ½åŠ›å‘ŠçŸ¥å¤§æ¨¡å‹ï¼Œå¤§æ¨¡å‹å°±å¯ä»¥å†³å®šåœ¨ä»€ä¹ˆæ—¶å€™ä½¿ç”¨è¿™äº›èƒ½åŠ›äº†ã€‚

å½“ç„¶ï¼Œåˆ°è¿™é‡Œï¼Œä»é€»è¾‘ä¸Šæ¥çœ‹ï¼Œå…¶å®å°±æ˜¯æ¨¡å‹ç›´æ¥æ§åˆ¶Toolçš„è°ƒç”¨äº†ï¼ˆModel-Controlledï¼‰ï¼Œ å¯¹å§ï¼Ÿ

ä¹Ÿå°±æ˜¯ï¼š

`prompt -> llm (with tools aware) -> tools`

ä½†å·¥ç¨‹å®ç°ä¸Šæˆ‘ä»¬è¯´äº†ï¼Œå‡½æ•°æ‰§è¡Œçš„äº‹å„¿ï¼Œå¤§æ¨¡å‹æ˜¯ä¸ç®¡çš„ï¼Œ æ‰€ä»¥ï¼Œåœ¨å¤§æ¨¡å‹å†³å®šç”¨ä»€ä¹ˆå·¥å…·ä¹‹åï¼Œå…¶å®ï¼Œè¿˜æ˜¯mcp hostæ‹¿åˆ°æŒ‡ç¤ºï¼Œå†å»è°ƒç”¨å¯¹åº”çš„mcp serveræ‰§è¡ŒæŒ‡å®šçš„Toolã€‚

æ‰€ä»¥ï¼Œè¿™ç¡®å®ä¹Ÿæ˜¯ä¸€ä¸ªfunction callingçš„è¿‡ç¨‹ï¼Œåªä¸è¿‡ï¼Œå®Œæ•´çš„function callingï¼Œä¾ ä¹‰éƒ¨åˆ†æ˜¯mcp host + mcp clientå®Œæˆçš„ï¼Œè€Œå‡½æ•°æ‰§è¡Œéƒ¨åˆ†ï¼Œåˆ™æ˜¯mcp host + mcp clientå»è°ƒç”¨mcp serverå®Œæˆçš„ã€‚

è‡³æ­¤ï¼Œä½ åº”è¯¥å¾ˆæ¸…æ¥šæ•´ä¸ªMCPåˆ°åº•æ˜¯æ€ä¹ˆå·¥ä½œçš„äº†å§ï¼Ÿ

å†å›å¤´çœ‹çœ‹å‰é¢AI Agentçš„ç»“æ„å›¾ï¼Œè·ŸMCPçš„ç»“æ„å›¾ï¼Œä¸æ˜¯å¾ˆåƒï¼Ÿ

åƒå°±å¯¹äº†ï¼

æœ€åï¼Œå†å¼ºè°ƒä¸‹ï¼Œæˆ‘ä¸ºå•¥ä¸€ç›´å¼ºè°ƒè¦åŒºåˆ†AIåº”ç”¨æˆ–è€…è¯´å¤§æ¨¡å‹åº”ç”¨å’Œå¤§æ¨¡å‹å‘¢ï¼Ÿ

å› ä¸ºæ¯å®¶å¤§æ¨¡å‹æœåŠ¡æä¾›å•†éšè—åœ¨APIä¹‹åçš„ï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šå…¶å®ä¹Ÿæ˜¯ä¸€ä¸ªAI Agentæˆ–è€…è¯´AIå¤§æ¨¡å‹åº”ç”¨ï¼Œ åªä¸è¿‡ï¼Œå¯¹å¤–å£°ç§°æ˜¯ä»€ä¹ˆæ¨¡å‹ï¼Œä»€ä¹ˆæ¨¡å‹ï¼Œä½†å…¶å®ä½ æ ¹æœ¬å°±æ‘¸ä¸ç€æ¨¡å‹ï¼Œåªæœ‰ä»–å®¶è‡ªå·±åŒ…è£…ä¸€ä¸ªæ¨¡å‹æœåŠ¡ç»™ä½ ç”¨ï¼Œè€Œç»™ä½ ç”¨çš„æ–¹å¼å°±æ˜¯è¦ä¹ˆWebæˆ–è€…æ‰‹æœºAPPäº§å“ï¼Œè¦ä¹ˆå°±æ˜¯APIã€‚

å¤§æ¨¡å‹æœ‰äº›èƒ½åŠ›ç¡®å®æ˜¯å†…åŒ–çš„ï¼ˆinlineï¼‰ï¼Œä½†å¤§éƒ¨åˆ†æ—¶å€™ï¼Œå…¶å®éƒ½æ˜¯AI Agentåœ¨å‘µæŠ¤ç€å®ƒä»¬ğŸ˜‰

å¤§æ¨¡å‹æ˜¯çœŸç¥ï¼Œæ˜¯ä½ æƒ³è§å°±èƒ½è§çš„ï¼ŸğŸ¤£

> æ›´å¤šMCPç›¸å…³å†…å®¹ï¼Œå¯ä»¥å‚è€ƒ[æ¶æ„ç™¾ç§‘](https://jiagoubaike.com)ä¸­çš„[MCPæ¡ç›®](https://jiagoubaike.com/posts/mcp)ã€‚




